<!--
  Generated template for the NewInstancePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar hideBackButton>
    <ion-buttons left>
      <button ion-button navPop icon-only>
        <ion-icon ios="ios-arrow-back" md="md-arrow-back" style="color: #ffffff"></ion-icon>
      </button>
    </ion-buttons>
    <button id="save_button"  (click)="saveInstance(instanceForm.value)" ion-button round float-right  type="submit"
            [disabled]="!instanceForm.valid || isbutton_clicked==true">
      SAVE
    </button>
    <ion-title *ngIf="name==''">New Instance</ion-title>
    <!--<div >Update Instance</div>-->
    <ion-title *ngIf="name!=''">Update Instance</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="instanceForm" (ngSubmit)="saveInstance(instanceForm.value)" novalidate>
    <ion-list>
      <div id="input_instanceName" [class.error]="!instanceName.valid && instanceName.touched">
        <ion-input type="text" [(ngModel)]="insName" (keyup)="checkInput()" clearInput="true" maxlength="100" required
                   placeholder="Instance Name" [value]="name" [formControl]="instanceName"></ion-input>
      </div>
      <div *ngIf="instanceName.hasError('required') && instanceName.touched" class="error-message">* InstanceName cannot be empty!
      </div>
      <ion-item>
        <button ion-item id="select_template" type="button" (click)="showSearch()"><span float-left >{{templateSelected}}</span><span float-right><ion-icon
          ios="ios-arrow-dropdown" md="md-arrow-dropdown"></ion-icon></span></button>
      </ion-item>
    </ion-list>
    <div class="search-box" [hidden]="showSearchBox==false">
      <ion-input id="search_template" no-border="false" clearInput="true" placeholder="Template name" type="text" (ionBlur)="closeItems()" (ionChange)="getItems()"
                 [(formControl)]="templateName" [value]="templateName.value">
      </ion-input>
      <div class="search-result" [hidden]="showTemplates==false">
        <ion-list>
          <ion-option ion-item *ngFor="let template of items" (click)="select(template)">{{template}}</ion-option>
        </ion-list>
      </div>
    </div>
    <div>

    </div>
  </form>
  <table>
    <ion-row >

    </ion-row>
  </table>
</ion-content>
